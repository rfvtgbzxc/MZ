# [条件付きベース](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_ConditionsBase.js)
# Ver.1.1.6
[ダウンロード](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_ConditionsBase.js)
#### 必須、前提プラグイン
[共通処理](https://github.com/nuun888/MZ/blob/master/README/Base.md)  

条件により発動する特徴、スキルなどを設定するためのプラグインです。  
タグの記述方法は各対応のプラグインで確認してください。  
条件はプラグインパラメータの適用条件で設定します。適用条件は全ての条件付き対応プラグインで共通となります。

## 設定方法
条件により発動する特徴、スキルなどを設定するためのプラグインです。  
タグの記述方法は各対応のプラグインで確認してください。  
条件はプラグインパラメータの適用条件で設定します。適用条件は全ての条件付き対応プラグインで共通となります。  

リストに条件を設定していきます。  
識別名：何の条件かを認識しやすいようにするためのパラメータです。現バージョンでは設定しなくても問題ありません。  
条件タイプ：条件を設定します。設定後に表示されている文字とパーティ、敵グループから評価式までの（）内に表示されている文字と同じ項目を指定します。（'Battler'ならアクター、敵(Battler)）  

共通設定の各項目は、設定した項目に記載してある()内の数字の項目に記入します。  
(1)(3)なら共通設定の上限値、下限値または指定のIDに記入。  
(1)(2)はどちらかを入力します。  
敵グループは戦闘中のみ有効です。  

### 条件
(1)上限下限値：上限値は判定する数値の最大値を参照します。下限値は判定する数値の最小値を参照します。  
下限値以上上限値以下なら条件を満たします。上限値が0なら下限値以上なら条件を満たします。  

(2)指定した数値：数値は複数設定できますが複数設定する場合は、''または""で囲む必要があります。  
いずれかの数値が一致したときに条件を満たします。　指定した数値に入力がある場合(1)上限下限値の設定は無視されます。  
2つ以上指定する場合は必ず''で囲ってください。例'6,7,17'  

(3)指定したID：数値は複数設定できますが複数設定する場合は、''または""で囲む必要があります。  
いずれかのIDが一致したときに条件を満たします。  
2つ以上指定する場合は必ず''で囲ってください。例'6,7,17'  

対象がアクター、パーティなら味方、エネミー、敵グループなら敵の条件を参照します。  
### 【パーティ、敵グループ】
#### [戦闘メンバー数]
戦闘メンバー該当のメンバーの数が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
敵グループは戦闘中以外の場合はfalseを返します。  
#### [生存メンバー数]
戦闘メンバーで戦闘不能になっていない該当のメンバーの数が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
敵グループは戦闘中以外の場合はfalseを返します。

### 【アクター、敵】
#### [バトラーID]
使用者、または対象のIDが「指定した数値」(3)を一致なら条件を満たします。  
#### [一致したバトラーID数]
「指定した数値」(3)が一致したIDの数が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  

### 【職業】
#### [クラスID]
使用者、または対象のクラスIDが「指定した数値」(3)を一致なら条件を満たします。対象が敵または敵グループの場合はfalseを返します。  
#### [一致したクラスID数]
「指定した数値」(3)が一致したクラスIDの数が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
対象が敵または敵グループの場合はfalseを返します。  

### 【能力値】
#### [HP][MP][TP]
対象のHP,MP,TPが「上限下限値%内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
上限値、下限値は割合(%)、指定の数値は通常の値です。  
#### [攻撃][防御][魔法力][魔法防御][敏捷][運]
対象のステータス値が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  

### 【追加能力値】
対象のステータス値が「上限下限値%内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
上限値、下限値は割合(%)、指定の数値は通常の値です。  

### 【特殊能力値】
対象のステータス値が「上限下限値%内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
上限値、下限値は割合(%)、指定の数値は通常の値です。  

### 【レベル】
#### [指定のレベル]
対象のレベルが「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティの場合はいずれかが一致したときに条件を満たします。  
#### [平均レベル]
メンバーの平均レベルが「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
対象がアクター、パーティなら味方の条件を参照します。  

### 【ステート】
#### [指定のステートIDにかかっている]
対象が「指定のステートID](3)にかかっていて残りターンが「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
ステートごとに残りターン条件を指定したい場合は条件リストを別途追加してください。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
#### [指定のステートIDにかかっていない]
対象が「指定のステートID](3)にかかっていなければ条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
#### [指定のステートIDにかかっている(経過ターン)] 要ステート経過ターンカウント  
対象が「指定のステートID](3)にかかっていて経過ターンが「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  

### 【バフ】
#### [指定のバフIDにかかっている][指定のデバフIDにかかっている]
対象が「指定のバフID](3)にかかっていれば条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
#### [指定のバフIDにかかっていない][指定のデバフIDにかかっていない]
対象が「指定のバフID](3)にかかっていなければ条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  
0：HP　1：MP　2:攻撃力　3：防御力　4：魔法力　5：魔法防御　6：敏捷性　7：運  

### 【武器タイプ】
#### [指定の武器装備][指定の防具装備]
対象が「指定の装備ID](3)を装備していれば一致なら条件を満たします。  
「指定の武器ID]を0に指定した場合は素手の時に条件を満たします。  
「指定の防具ID]を0に指定した場合は防具を装備していない時に条件を満たします。  
パーティの場合はいずれかが一致したときに条件を満たします。  
対象が敵または敵グループの場合はfalseを返します。  
#### [指定の武器タイプ][指定の防具タイプ]
対象が「指定の武器、防具タイプID](3)の装備を装備していれば一致なら条件を満たします。  
パーティの場合はいずれかが一致したときに条件を満たします。  
対象が敵または敵グループの場合はfalseを返します。  

### 【ターン】
#### [指定のターン]
対象または現在のターンが「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
ターン制の場合は現在のターンが参照されます。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  

### 【属性】
#### [指定の属性]
対象の攻撃属性が「指定した数値」(3))と一致なら条件を満たします。  
なお対象がパーティ、敵グループの場合は判定しません。  

### 【有効度】
#### [属性有効度][ステート有効度]
対象の「指定した属性、ステートIDの有効度」(3))が「上限下限値%内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はいずれかが一致したときに条件を満たします。  

### 【アイテム、スキル使用】
#### [アイテムを使用][スキルを使用]
使用したアイテム、スキル「指定したアイテム、スキルID」(3)が一致なら条件を満たします。    
パーティ、敵グループの場合はfalseを返します。  
#### [スキルタイプ]
対象の攻撃時のスキルタイプが「指定した数値」(3))と一致なら条件を満たします。  
パーティ、敵グループの場合はfalseを返します。  

### 【アイテム所持、スキル習得】
####  [アイテム所持][武器所持][防具所持]
\[指定した数値](3)の所持数が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
下限値を1、上限値を0に設定することで１つ以上所持で条件を満たすようになります。  
敵、敵グループの場合はfalseを返します。  
#### [スキル習得済み]
\[指定した数値](3)が習得済みなら条件を満たします。
敵の場合は行動スキルに(3)のスキルが存在すれば条件を満たします。  

### 【攻撃】
#### [命中タイプが物理][命中タイプが魔法][命中タイプが必中]
攻撃時の命中タイプが一致すれば条件を満たします。  
パーティ、敵グループの場合はfalseを返します。  
#### [ダメージタイプがHP回復][ダメージタイプがMP回復][ダメージタイプがHP吸収][ダメージタイプがMP吸収]
攻撃時のダメージタイプが一致すれば条件を満たします。  
パーティ、敵グループの場合はfalseを返します。    
#### [クリティカル時]  
クリティカルなら条件を満たします。    

### 【ダメージ】
#### [指定のダメージ]
ダメージが「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  
パーティ、敵グループの場合はfalseを返します。  

### 【反撃、反射】
#### [反撃時][魔法反射時]
反撃時または魔法反射時なら条件を満たします。  

### 【乗り物】
#### [小舟に乗っている][大型船に乗っている][飛行船に乗っている][乗り物に乗っている]
 該当の乗り物に乗っているなら条件を満たします。  
#### [小舟に乗っていない][大型船に乗っていない][飛行船に乗っていない][乗り物に乗っていない]
該当の乗り物に乗っていないなら条件を満たします。  

### 【ゲーム変数】
#### [指定の変数]
「指定した変数ID」(3)の値が「上限下限値内」(1)または「指定した数値」(2)と一致なら条件を満たします。  

### 【スイッチ】
#### [指定のスイッチがON]
「指定したスイッチID」(3)がONなら条件を満たします。  
#### [指定のスイッチがOFF]
「指定したスイッチID」(3)がOFFなら条件を満たします。  

### 【所持金】
#### [所持金額]
所持金が\[上限下限値内](1)または「指定した数値」(2)と一致なら条件を満たします。  
対象が味方、パーティなら所持金を参照します。  
対象が敵なら敵の獲得できる所持金を参照します。  
対象が敵グループなら敵グループの獲得できる合計の所持金が参照されます。  

### 【経験値】
#### [現レベルの経験値]
現レベルの獲得経験値が\[上限下限値内](1)または「指定した数値」(2)と一致なら条件を満たします。  
対象が敵、敵グループならfalseを返します。  

#### 【条件式】
条件式の評価がtrueなら条件を満たします。

### 例
#### 生存しているパーティメンバーが４人以上の場合
条件タイプ　パーティ、敵グループ(Member)  
パーティ、敵グループ　生存メンバー数(1)(2)（(1)バトラー数、(2)バトラー数）'AliveMember'  
上限値(1) 0 下限値(1) 4  
上限値は指定の数値以下　下限値は指定の数字以上　指定の数値は固定値になります。(1)と(2)は両方選択することはできませんので別々にリストに設定してください。  

#### ステート4番にかかっている
条件タイプ　ステート(State)  
ステート　指定のステートIDにかかっている(1)(2)(3)（(1)ターン (2)ターン (3)ステートID）'AddState'  
指定の数値(2) 無記入 または　上限値(1) 0、下限値(2) 0  
指定のID(3) 4  

#### ステート5番6番にかかっていて残りターン３ターン目の場合
条件タイプ　ステート(State)  
ステート　指定のステートIDにかかっている(1)(2)(3)（(1)ターン (2)ターン (3)ステートID）'AddState'  
指定の数値(2) 3 または　上限値(1) 3、下限値(2) 3  
指定のID(3) 5,6  

#### ゲーム変数１０番が１０２以上１１０以下の場合
条件タイプ　ゲーム変数(Variable)  
ゲーム変数　指定の変数(1)(2)(3)（(1)範囲値 (2)値 (3)ゲーム変数ID）'Var'  
上限値(1) 110 下限値(2) 102  
指定のID(3) 10  

## 対応プラグイン
[盗みスキル](https://github.com/nuun888/MZ/blob/master/README/StealableItems.md)  
[スキル、アイテム使用条件](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_ConditionalSkills.js)  
[踏み止まり特徴](https://github.com/nuun888/MZ/blob/master/README/StoppingFeature.md)  
[行動時ブースト特徴](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_boostEX.js)  
[条件付きドロップアイテム](https://github.com/nuun888/MZ/blob/master/README/ConditionalDrops.md)  
[敵の行動パターン条件拡張](https://github.com/nuun888/MZ/blob/master/README/CondEnemyAction.md)  
[エンカウント条件](https://github.com/nuun888/MZ/blob/master/README/EncounterCondition.md)  

## 更新履歴
2022/8/28 Ver.1.1.6  
ステートのターン条件に経過ターンで指定できる機能を追加。  
2022/6/19 Ver.1.1.5  
一部プラグインでエラーが出るため修正。  
2022/5/4 Ver.1.1.4  
一部条件によってはクリティカル時の条件が適用されない問題を修正。  
リストにないIDが設定されていた場合にエラーが起きる問題を修正。  
2021/12/31 Ver.1.1.3  
戦闘外の敵グループ指定の戻り値をfalseで返すように修正。  
2021/12/19 Ver.1.1.2  
条件に戦闘不能メンバー、サポートアクターメンバーを追加。  
エンカウント条件適用による処理の追加。  
2021/12/18 Ver.1.1.1  
使用者、または対象がアクター、敵の条件を追加。  
2021/12/13 Ver.1.1.0  
条件にアイテム、武器、防具の所持、スキルの習得、スキルタイプ、所持金、反撃、魔法反射を追加しました。  
スキル、アイテム使用が適用されていなかった問題を修正。  
2021/11/27 Ver.1.0.5  
装備判定が適用されていなかった問題を修正。  
指定の装備に素手時、防具なしの時の条件を追加。  
2021/11/13 Ver.1.0.4  
ステート、バフのID指定が正常に適用されていなかった問題を修正。  
一部のバフ条件が適用されなかった問題を修正。  
2021/11/12 Ver.1.0.3  
ターン制時に条件ターンが正常に取得できていなかった問題を修正。  
一部プラグインの定義変更。  
複数属性取得処理の変更。NUUN_Base 要Ver.1.3.1以降  
2021/9/13 Ver.1.0.1  
属性時の条件が正常に判定されていなかった問題を修正。  
2021/9/13 Ver.1.0.0  
初版  
